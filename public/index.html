<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Communication Health Analyzer</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìß Communication Health Analyzer</h1>
            <p>LangGraph-powered email thread analysis for relationship insights</p>
        </div>

        <div class="main-content">
            <div class="sample-data">
                <h3>üöÄ Quick Start</h3>
                <p>Choose from different communication scenarios to test the analyzer with realistic data.</p>
                
                <div class="sample-controls">
                    <div class="sample-group">
                        <label for="emailScenario">üìß Email Scenarios:</label>
                        <select id="emailScenario" class="scenario-select">
                            <option value="">Select email scenario...</option>
                            <option value="good">‚úÖ Good - Professional & Positive</option>
                            <option value="medium">‚ö†Ô∏è Medium - Some Tensions</option>
                            <option value="bad">‚ùå Bad - Conflict & Issues</option>
                        </select>
                        <button class="btn btn-success" onclick="loadEmailScenario()">Load Email Thread</button>
                    </div>
                    
                    <div class="sample-group">
                        <label for="meetingScenario">üé§ Meeting Scenarios:</label>
                        <select id="meetingScenario" class="scenario-select">
                            <option value="">Select meeting scenario...</option>
                            <option value="good">‚úÖ Good - Collaborative Discussion</option>
                            <option value="medium">‚ö†Ô∏è Medium - Mixed Dynamics</option>
                            <option value="bad">‚ùå Bad - Heated Disagreement</option>
                        </select>
                        <button class="btn btn-success" onclick="loadMeetingScenario()">Load Meeting Transcript</button>
                    </div>
                    
                    <div class="sample-group">
                        <label for="mixedScenario">üîÑ Mixed Communication:</label>
                        <select id="mixedScenario" class="scenario-select">
                            <option value="">Select mixed scenario...</option>
                            <option value="good">‚úÖ Good - Emails + Follow-up Meeting</option>
                            <option value="medium">‚ö†Ô∏è Medium - Issue Discussion Across Channels</option>
                            <option value="bad">‚ùå Bad - Escalation from Email to Meeting</option>
                        </select>
                        <button class="btn btn-success" onclick="loadMixedScenario()">Load Mixed Communication</button>
                    </div>
                </div>
                
                <div class="sample-controls" style="margin-top: 15px; grid-template-columns: 1fr;">
                    <div class="sample-group" style="text-align: center;">
                        <button class="btn" onclick="showJsonFormat()">üìã Show JSON Format</button>
                    </div>
                </div>
            </div>

            <div id="jsonFormatSection" class="json-format">
                <h4>üìã Supported JSON Formats:</h4>
                
                <h5>üìß Email Thread Format:</h5>
                <pre>{
  "conversationId": "conv-emails-001",
  "type": "email",
  "participants": ["alice@company.com", "bob@company.com"],
  "emails": [
    {
      "id": "email-001",
      "from": "alice@company.com",
      "to": ["bob@company.com"],
      "cc": [],
      "subject": "Project Update",
      "body": "Hi Bob, I wanted to update you...",
      "timestamp": "2024-01-15T09:00:00.000Z",
      "priority": "normal",
      "isReply": false,
      "replyToId": null
    }
  ],
  "metadata": {
    "source": "outlook",
    "extractedAt": "2024-01-16T10:00:00.000Z",
    "version": "1.0"
  }
}</pre>
                
                <h5>üé§ Meeting Transcript Format:</h5>
                <pre>{
  "conversationId": "meeting-001",
  "type": "meeting",
  "participants": ["Alice Johnson", "Bob Smith", "Carol Davis"],
  "transcript": [
    {
      "id": "transcript-001",
      "speaker": "Alice Johnson",
      "text": "Good morning everyone. Let's discuss the project timeline...",
      "timestamp": "2024-01-15T09:00:00.000Z",
      "duration": 15
    }
  ],
  "metadata": {
    "source": "teams",
    "meetingDuration": 3600,
    "meetingDate": "2024-01-15T09:00:00.000Z",
    "version": "1.0"
  }
}</pre>

                <h5>üîÑ Mixed Communication Format:</h5>
                <pre>{
  "conversationId": "mixed-001",
  "type": "mixed",
  "participants": ["alice@company.com", "Bob Smith", "Carol Davis"],
  "emails": [
    {
      "id": "email-001",
      "from": "alice@company.com", 
      "to": ["bob@company.com"],
      "cc": [],
      "subject": "Pre-meeting preparation",
      "body": "Hi Bob, let's discuss this in tomorrow's meeting...",
      "timestamp": "2024-01-15T14:00:00.000Z",
      "priority": "normal",
      "isReply": false,
      "replyToId": null
    }
  ],
  "transcript": [
    {
      "id": "transcript-001",
      "speaker": "Bob Smith",
      "text": "Thanks for the email Alice. Let's dive into the details...",
      "timestamp": "2024-01-16T09:00:00.000Z",
      "duration": 12
    }
  ],
  "metadata": {
    "source": "teams",
    "meetingDuration": 1800,
    "meetingDate": "2024-01-16T09:00:00.000Z",
    "version": "1.0"
  }
}</pre>
            </div>

            <form id="emailForm">
                <div class="form-section">
                    <h2>üí¨ Communication Data (JSON Format)</h2>
                    <div class="form-group">
                        <label for="jsonInput">Paste your conversation JSON here (emails or meeting transcript):</label>
                        <textarea id="jsonInput" name="jsonInput" placeholder='Paste your JSON here...' style="min-height: 400px; font-family: monospace;"></textarea>
                        <small style="color: #666; margin-top: 5px; display: block;">
                            üí° Tip: Supports email threads from Outlook/Gmail or meeting transcripts from Teams/Zoom. Use the "Show JSON Format" button above to see expected formats.
                        </small>
                    </div>
                </div>

                <div class="form-section">
                    <button type="submit" class="btn btn-success">üîç Analyze Communication Health</button>
                    <button type="button" class="btn" onclick="clearForm()">Clear JSON</button>
                    <button type="button" class="btn btn-warning" onclick="validateJson()">‚úÖ Validate JSON</button>
                </div>
            </form>

            <div id="responseSection" class="response-section">
                <h2>Analysis Results</h2>
                <div id="responseContent"></div>
            </div>
        </div>
    </div>

    <!-- Include JavaScript modules -->
    <script src="js/sampleData.js"></script>
    <script src="js/dashboard.js"></script>
    <script src="js/app.js"></script>
</body>
</html>